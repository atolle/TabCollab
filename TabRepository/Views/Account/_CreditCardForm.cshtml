@using TabRepository.ViewModels
@model CreditCardFormViewModel

<div style="width: 100%;">
    @if (ViewBag.FromRegistration == true)
    {
    <div style="width: 100%; margin-top: 5em; margin-bottom: 5em">
        <h2>Registration Successful</h2>
        <p>
            You have successfully registered! We have sent you a registration confirmation email. Please confirm your account before logging in.            
        </p>
        <p>
            Select your account type below and submit your payment information to complete registration.
        </p>
    </div>
    }
    <div class="row row-no-margin" style="max-width: 1000px; margin: auto">
        <div class="col-md-6" align="center">
            <form id="payment-form" class="form-horizontal">                
                <div class="row row-no-margin">
                    <div class="col">
                        <div class="form-group owner">
                            <div class="form-label">
                                <label asp-for="CardName"></label>
                            </div>
                            <input asp-for="CardName" class="form-control form-input tax-field" />
                            <div class="form-label">
                                <span asp-validation-for="CardName" style="color: red"></span>
                                <span id="name-error" class="validation-error" style="color: red"></span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row row-no-margin">
                    <div class="col">
                        <div class="form-group owner">
                            <div class="form-label">
                                <label asp-for="Address"></label>
                            </div>
                            <input asp-for="Address" class="form-control form-input tax-field" />
                            <div class="form-label">
                                <span asp-validation-for="Address" style="color: red"></span>
                                <span id="address-error" class="validation-error" style="color: red"></span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row row-no-margin">
                    <div class="col-md-5">
                        <div class="form-group">
                            <div class="form-label">
                                <label asp-for="City"></label>
                            </div>
                            <input asp-for="City" class="form-control form-input tax-field" />
                            <div class="form-label">
                                <span asp-validation-for="City" style="color: red"></span>
                                <span id="city-error" class="validation-error" style="color: red"></span>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-2">
                        <div class="form-group">
                            <div class="form-label">
                                <label asp-for="State"></label>
                            </div>
                            <input asp-for="State" class="form-control form-input tax-field" />
                            <div class="form-label">
                                <span asp-validation-for="State" style="color: red"></span>
                                <span id="state-error" class="validation-error" style="color: red"></span>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-5">
                        <div class="form-group">
                            <div class="form-label">
                                <label asp-for="Zip"></label>
                            </div>
                            <input asp-for="Zip" class="form-control form-input tax-field" />
                            <div class="form-label">
                                <span asp-validation-for="Zip" style="color: red"></span>
                                <span id="zip-error" class="validation-error" style="color: red"></span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row row-no-margin">
                    <div class="col-md-6">
                        <div class="form-group owner">
                            <div class="form-label">
                                <label asp-for="CardNumber"></label>
                            </div>
                            <input asp-for="CardNumber" class="form-control form-input" />
                            <div class="form-label">
                                <span asp-validation-for="CardNumber" style="color: red"></span>
                                <span id="number-error" class="validation-error" style="color: red"></span>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <div class="form-label">
                                <label asp-for="CVC"></label>
                            </div>
                            <input asp-for="CVC" class="form-control form-input" />
                            <div class="form-label">
                                <span asp-validation-for="CVC" style="color: red"></span>
                                <span id="cvc-error" class="validation-error" style="color: red"></span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row row-no-margin">
                    <div class="col-md-6">
                        <div class="form-group">
                            <div class="form-label">
                                <label>Expiration Date</label>
                            </div>
                            <div class="row">
                                <div class="col">
                                    <select asp-for="Month" class="form-control">
                                        <option value="01">January</option>
                                        <option value="02">February </option>
                                        <option value="03">March</option>
                                        <option value="04">April</option>
                                        <option value="05">May</option>
                                        <option value="06">June</option>
                                        <option value="07">July</option>
                                        <option value="08">August</option>
                                        <option value="09">September</option>
                                        <option value="10">October</option>
                                        <option value="11">November</option>
                                        <option value="12">December</option>
                                    </select>
                                </div>
                                <div class="col">
                                    <select asp-for="Year" class="form-control">
                                        <option value="19"> 2019</option>
                                        <option value="20"> 2020</option>
                                        <option value="21"> 2021</option>
                                        <option value="22"> 2022</option>
                                        <option value="23"> 2023</option>
                                        <option value="24"> 2024</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-label">
                                <span id="exp-error" class="validation-error" style="color: red"></span>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 credit-cards-container">
                        <div class="form-group" id="credit-cards">
                            <img class="credit-card" src="~/images/visa.png" id="visa">
                            <img class="credit-card" src="~/images/mastercard.png" id="mastercard">
                            <img class="credit-card" src="~/images/amex.png" id="amex">
                            <img class="credit-card" src="~/images/discover.png" id="discover">
                        </div>
                    </div>
                </div>
                <div class="row row-no-margin">
                    <div class="col-md-6">
                        <div class="form-group">
                            <div class="form-label">
                                <label asp-for="AccountType"></label>
                            </div>
                            <select class="form-control form-input valid tax-field" data-val="true" data-val-required="Account Type is required" id="AccountType" name="AccountType" aria-required="true" aria-invalid="false" aria-describedby="AccountType-error">
                                <option value="1">Pro</option>
                            </select>
                            <div class="form-label">
                                <span asp-validation-for="AccountType" style="color: red"></span>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <div class="form-label">
                                <label asp-for="Interval"></label>
                            </div>
                            <select class="form-control form-input valid tax-field" data-val="true" data-val-required="Interval is required" id="Interval" name="Interval" aria-required="true" aria-invalid="false" aria-describedby="Interval-error">
                                <option value="0">Monthly</option>
                                <option value="1">Yearly</option>
                            </select>
                            <div class="form-label">
                                <span asp-validation-for="Interval" style="color: red"></span>
                            </div>
                        </div>
                    </div>
                </div>
                <p>* Your subscription will auto-renew until you cancel *</p>
                <div class="row row-no-margin">
                    <div class="col">
                        <div class="form-group">
                            <button type="submit" class="btn btn-default button-submit-wide">Calculate Tax</button>
                        </div>
                    </div>
                </div>
                @Html.AntiForgeryToken()
            </form>
            <form asp-controller="Account" asp-action="SubscriptionProcess" asp-route-returnurl="@ViewData["ReturnUrl"]" id="token-form" method="post" hidden>
                <input asp-for="PaymentToken" hidden />
                <input hidden="" type="text" data-val="true" data-val-required="The Interval field is required." id="StripeInterval" name="StripeInterval" value="">
                <input hidden="" type="text" data-val="true" data-val-required="The Subtotal field is required." id="Subtotal" name="Subtotal" value="">
                <input hidden="" type="text" data-val="true" data-val-required="The Tax field is required." id="Tax" name="Tax" value="">
                <input hidden="" type="text" data-val="true" data-val-required="The Zipcode field is required." id="StripeZip" name="StripeZip" value="">
                <input hidden="" type="text" data-val="true" data-val-required="The Address field is required" id="StripeAddress" name="StripeAddress" value="">
                <input hidden="" type="text" data-val="true" data-val-required="The City field is required." id="StripeCity" name="StripeCity" value="">
                <input hidden="" type="text" data-val="true" data-val-required="The State field is required." id="StripeState" name="StripeState" value="">
                @Html.Hidden("UserId", ViewData["UserId"])
            </form>
        </div>
        <div class="col-md-6" style="display: flex; align-items: center; justify-content: center" align="center">
            <div style="width: 100%;">
                <table id="payment-summary-table" class="table table-striped table-dark table-hover">
                    <tbody>
                        <tr>
                            <td>Account Type</td>
                            <td><span id="account-type">Pro</span></td>
                        </tr>
                        <tr>
                            <td>Interval</td>
                            <td><span id="interval">Monthly</span></td>
                        </tr>
                        <tr>
                            <td>Subtotal</td>
                            <td><span id="subtotal">$4.99</span></td>
                        </tr>
                        <tr>
                            <td>Tax</td>
                            <td><span id="tax">$0.00</span><span class="pull-right" id="tax-status"><i style="color: red" class="fa fa-times fa-lg" /></span></td>
                        </tr>
                        <tr>
                            <td><strong>Total</strong></td>
                            <td><strong><span id="total">$0.00</span></strong></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>