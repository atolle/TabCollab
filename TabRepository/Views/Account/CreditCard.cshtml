@using TabRepository.ViewModels
@model CreditCardFormViewModel

@{
    ViewData["Title"] = "Upgrade Account";
}

<div id="contributor-level-modal" class="modal fade">
    <div class="modal-dialog text-left">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Contributor Level</h4>
                <button type="button" class="close modal-close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <h6 style='text-decoration: underline'>What is Contributor Level?</h6>
                Contibutors are other TabCollab users whom you give permission to contribute to your tabs. Contributor Level all comes down to how granular you want to be with your contributors' access to your material. It is the level at which contributors access your music.<br /><br />If the Contributor Level is Project, then the contributor has access to everything inside the Project (all Albums, all Tabs). If the Contributor Level is Tab, then the contributor only has access to the specified Tab.<br /><br />
                Composer accounts allow you to be more precise in what you allow contributors to access.
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<div id="contributor-modal" class="modal fade">
    <div class="modal-dialog text-left">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Contributors</h4>
                <button type="button" class="close modal-close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <h6 style='text-decoration: underline'>What are Contributors?</h6>
                Contibutors are other TabCollab users whom you give permission to contribute to your Project, Albums, and Tabs.
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<div id="tab-modal" class="modal fade">
    <div class="modal-dialog text-left">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Tab and Tab Version Counts</h4>
                <button type="button" class="close modal-close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <h6 style='text-decoration: underline'>How do Tab and Tab Version counts work?</h6>
                It all comes down to who is the owner of the Tab. In TabCollab, the user who creates the Project owns everything within that Project. So, Tabs and Tab Versions are owned by the owner of the Project.<br /><br /> If you create a Project and add Contributors, any new Tabs or new Tab Versions they add to your Project count towards your Tab and Tab Version count. Likewise, any contributions you make to someone else's Projects count towards their account.
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<div id="account-details" class="flex-container" style="flex-direction: column">
    <div style="margin: 20px 20px 0px 20px; max-width: 1050px; text-align: justify">
        <h3 style="text-align: center">Upgrade Account</h3>
        <br />
        <p>We offer several different tiers of services at TabCollab. It really depends on what is best for you - for some people, a Free account is all they need. Others may want the perks of the Composer account. It's entirely up to you!</p>
    </div>
    <hr class="white-divider" />
    <div style="width: 90%">
        <hr class="green-divider green-divider-top" />
        <div class="green-vertical-top"></div>
    </div>
    <div class="row" style="margin: 0px 20px 0px 20px; max-width: 85%; text-align: justify">
        <div class="col-lg-4">
            <h4 class="feature-column-title" style="text-align: center; margin-top: 40px;"><span class="feature-column-title-border">FREE</span></h4>
            <p>The Free account is perfect if you're wanting to give TabCollab a try. It's also great if you are not necessarily a big composer personally, but you are in bands for which you write your own parts. Maybe you're a bassist who doesn't write their own full songs, but you do want to be able to add your basslines to the tabs of your band.</p>
        </div>
        <div class="col-lg-4">
            <h4 class="feature-column-title" style="text-align: center; margin-top: 40px;"><span class="feature-column-title-border">PRO</span></h4>
            <p>The Pro account is for those who write their own songs, and write a lot of them. Do you consider yourself a band leader? Do you have many projects? If you want your bandmates to contribute to your music, this is the account type for you.</p>
        </div>
        <div class="col-lg-4">
            <h4 class="feature-column-title" style="text-align: center; margin-top: 40px;"><span class="feature-column-title-border">COMPOSER</span></h4>
            <p>The Composer account allows for unlimited contributors at any level (Project, Album, or Tab). Maybe you have musicians with whom you are collaborating on a song, but you don't want them to have access to your entire project. Add them as a contributor for the tab and they'll only have access to that song.</p>
        </div>
    </div>
    <div style="width: 90%;">
        <div class="green-vertical-bottom"></div>
        <hr class="green-divider green-divider-bottom" />
    </div>
    <hr class="white-divider" />
</div>
<div id="table-form-container">
    <div class="row row-no-margin">
        <div class="col" align="center">
            <table id="features-table" class="table table-striped table-dark table-hover tabversions-table features-table">
                <thead>
                    <tr>
                        <th width="25%"><div class="table-header"></div>Feature</th>
                        <th width="25%"><div class="table-header">Free</div></th>
                        <th width="25%"><div class="table-header">Pro</div></th>
                        <th width="25%"><div class="table-header">Composer (coming soon)</div></th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td># of Projects</td>
                        <td class="green-cell"><div class="infinity">&#8734</div></td>
                        <td class="green-cell"><div class="infinity">&#8734</div></td>
                        <td class="green-cell"><div class="infinity">&#8734</div></td>
                    </tr>
                    <tr>
                        <td># of Albums</td>
                        <td class="green-cell"><div class="infinity">&#8734</div></td>
                        <td class="green-cell"><div class="infinity">&#8734</div></td>
                        <td class="green-cell"><div class="infinity">&#8734</div></td>
                    </tr>
                    <tr>
                        <td># of Tabs<br />(other users)<br /><i class="fa tab-question fa-question-circle fa-1" /></td>
                        <td class="green-cell"><div class="infinity">&#8734</div></td>
                        <td class="green-cell"><div class="infinity">&#8734</div></td>
                        <td class="green-cell"><div class="infinity">&#8734</div></td>
                    </tr>
                    <tr>
                        <td># of Tab Versions<br />(other users)<br /><i class="fa tab-question fa-question-circle fa-1" /></td>
                        <td class="green-cell"><div class="infinity">&#8734</div></td>
                        <td class="green-cell"><div class="infinity">&#8734</div></td>
                        <td class="green-cell"><div class="infinity">&#8734</div></td>
                    </tr>
                    <tr>
                        <td># of Tabs<br />(your user)<br /><i class="fa tab-question fa-question-circle fa-1" /></td>
                        <td>5</td>
                        <td class="green-cell"><div class="infinity">&#8734</div></td>
                        <td class="green-cell"><div class="infinity">&#8734</div></td>
                    </tr>
                    <tr>
                        <td># of Tab Versions<br />(your user)<br /><i class="fa tab-question fa-question-circle fa-1" /></td>
                        <td>15 total</td>
                        <td class="green-cell"><div class="infinity">&#8734</div></td>
                        <td class="green-cell"><div class="infinity">&#8734</div></td>
                    </tr>
                    <tr>
                        <td># of Contributors<br /><i class="fa contributor-question fa-question-circle fa-1" /></td>
                        <td>2 per Project</td>
                        <td>6 per Project</td>
                        <td class="green-cell"><div class="infinity">&#8734</div></td>
                    </tr>
                    <tr>
                        <td>Contributor Level<br /><i class="fa contributor-level-question fa-question-circle fa-1" /></td>
                        <td>Project</td>
                        <td>Project</td>
                        <td class="green-cell">Project<br />Album<br />Tab</td>
                    </tr>
                </tbody>
                <thead>
                    <tr>
                        <th width="40%"><div class="table-header"></div>Price</th>
                        <th width="30%"><div class="table-header">Free</div></th>
                        <th width="30%"><div class="table-header">$4.99/month<br />or<br />$49.99/year</div></th>
                        <th width="30%"><div class="table-header">$9.99/month<br />or<br />$99.99/year</div></th>
                    </tr>
                </thead>
            </table>
        </div>
    </div>
    <div class="row row-no-margin" style="max-width: 1000px; margin: auto">
        <div class="col-lg-6" align="center">
            <form id="payment-form" class="form-horizontal" style="margin-top: 20px">
                @Html.Hidden("UserId", ViewData["UserId"])
                <div class="row row-no-margin">
                    <div class="col">
                        <div class="form-group owner">
                            <div class="form-label">
                                <label asp-for="CardName"></label>
                            </div>
                            <input asp-for="CardName" class="form-control form-input tax-field" />
                            <div class="form-label">
                                <span asp-validation-for="CardName" style="color: red"></span>
                                <span id="name-error" class="validation-error" style="color: red"></span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row row-no-margin">
                    <div class="col">
                        <div class="form-group owner">
                            <div class="form-label">
                                <label asp-for="Address"></label>
                            </div>
                            <input asp-for="Address" class="form-control form-input tax-field" />
                            <div class="form-label">
                                <span asp-validation-for="Address" style="color: red"></span>
                                <span id="address-error" class="validation-error" style="color: red"></span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row row-no-margin">
                    <div class="col-md-5">
                        <div class="form-group">
                            <div class="form-label">
                                <label asp-for="City"></label>
                            </div>
                            <input asp-for="City" class="form-control form-input tax-field" />
                            <div class="form-label">
                                <span asp-validation-for="City" style="color: red"></span>
                                <span id="city-error" class="validation-error" style="color: red"></span>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-2">
                        <div class="form-group">
                            <div class="form-label">
                                <label asp-for="State"></label>
                            </div>
                            <input asp-for="State" class="form-control form-input tax-field" />
                            <div class="form-label">
                                <span asp-validation-for="State" style="color: red"></span>
                                <span id="state-error" class="validation-error" style="color: red"></span>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-5">
                        <div class="form-group">
                            <div class="form-label">
                                <label asp-for="Zip"></label>
                            </div>
                            <input asp-for="Zip" class="form-control form-input tax-field" />
                            <div class="form-label">
                                <span asp-validation-for="Zip" style="color: red"></span>
                                <span id="zip-error" class="validation-error" style="color: red"></span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row row-no-margin">
                    <div class="col-md-6">
                        <div class="form-group owner">
                            <div class="form-label">
                                <label asp-for="CardNumber"></label>
                            </div>
                            <input asp-for="CardNumber" class="form-control form-input" />
                            <div class="form-label">
                                <span asp-validation-for="CardNumber" style="color: red"></span>
                                <span id="number-error" class="validation-error" style="color: red"></span>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <div class="form-label">
                                <label asp-for="CVC"></label>
                            </div>
                            <input asp-for="CVC" class="form-control form-input" />
                            <div class="form-label">
                                <span asp-validation-for="CVC" style="color: red"></span>
                                <span id="cvc-error" class="validation-error" style="color: red"></span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row row-no-margin">
                    <div class="col-md-6">
                        <div class="form-group">
                            <div class="form-label">
                                <label>Expiration Date</label>
                            </div>
                            <div class="row">
                                <div class="col">
                                    <select asp-for="Month" class="form-control">
                                        <option value="01">January</option>
                                        <option value="02">February </option>
                                        <option value="03">March</option>
                                        <option value="04">April</option>
                                        <option value="05">May</option>
                                        <option value="06">June</option>
                                        <option value="07">July</option>
                                        <option value="08">August</option>
                                        <option value="09">September</option>
                                        <option value="10">October</option>
                                        <option value="11">November</option>
                                        <option value="12">December</option>
                                    </select>
                                </div>
                                <div class="col">
                                    <select asp-for="Year" class="form-control">
                                        <option value="19"> 2019</option>
                                        <option value="20"> 2020</option>
                                        <option value="21"> 2021</option>
                                        <option value="22"> 2022</option>
                                        <option value="23"> 2023</option>
                                        <option value="24"> 2024</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-label">
                                <span id="exp-error" class="validation-error" style="color: red"></span>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 credit-cards-container">
                        <div class="form-group" id="credit-cards">
                            <img class="credit-card" src="~/images/visa.png" id="visa">
                            <img class="credit-card" src="~/images/mastercard.png" id="mastercard">
                            <img class="credit-card" src="~/images/amex.png" id="amex">
                            <img class="credit-card" src="~/images/discover.png" id="discover">
                        </div>
                    </div>
                </div>
                <div class="row row-no-margin">
                    <div class="col-md-6">
                        <div class="form-group">
                            <div class="form-label">
                                <label asp-for="AccountType"></label>
                            </div>
                            <select class="form-control form-input valid tax-field" data-val="true" data-val-required="Account Type is required" id="AccountType" name="AccountType" aria-required="true" aria-invalid="false" aria-describedby="AccountType-error">
                                <option value="1">Pro</option>
                            </select>
                            <div class="form-label">
                                <span asp-validation-for="AccountType" style="color: red"></span>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <div class="form-label">
                                <label asp-for="Interval"></label>
                            </div>
                            <select class="form-control form-input valid tax-field" data-val="true" data-val-required="Interval is required" id="Interval" name="Interval" aria-required="true" aria-invalid="false" aria-describedby="Interval-error">
                                <option value="0">Monthly</option>
                                <option value="1">Yearly</option>
                            </select>
                            <div class="form-label">
                                <span asp-validation-for="Interval" style="color: red"></span>
                            </div>
                        </div>
                    </div>
                </div>
                <p>* Your subscription will auto-renew until you cancel *</p>
                <div class="row row-no-margin">
                    <div class="col">
                        <div class="form-group">
                            <button type="submit" class="btn btn-default button-submit-wide">Calculate Tax</button>
                        </div>
                    </div>
                </div>
                @Html.AntiForgeryToken()
            </form>
            <form asp-controller="Account" asp-action="SubscriptionProcess" asp-route-returnurl="@ViewData["ReturnUrl"]" id="token-form" method="post" hidden>
                <input asp-for="PaymentToken" hidden />
                <input hidden="" type="text" data-val="true" data-val-required="The Interval field is required." id="StripeInterval" name="StripeInterval" value="">
                <input hidden="" type="text" data-val="true" data-val-required="The Subtotal field is required." id="Subtotal" name="Subtotal" value="">
                <input hidden="" type="text" data-val="true" data-val-required="The Tax field is required." id="Tax" name="Tax" value="">
                <input hidden="" type="text" data-val="true" data-val-required="The Zipcode field is required." id="StripeZip" name="StripeZip" value="">
                <input hidden="" type="text" data-val="true" data-val-required="The Address field is required" id="StripeAddress" name="StripeAddress" value="">
                <input hidden="" type="text" data-val="true" data-val-required="The City field is required." id="StripeCity" name="StripeCity" value="">
                <input hidden="" type="text" data-val="true" data-val-required="The State field is required." id="StripeState" name="StripeState" value="">
            </form>
        </div>
        <div class="col-lg-6" align="center">
            <div style="display: flex; height: 100%; width: 100%; justify-content: center; align-items: center;">
                <table id="payment-summary-table" class="table table-striped table-dark table-hover">
                    <tbody>
                        <tr>
                            <td>Account Type</td>
                            <td><span id="account-type">Pro</span></td>
                        </tr>
                        <tr>
                            <td>Interval</td>
                            <td><span id="interval">Monthly</span></td>
                        </tr>
                        <tr>
                            <td>Subtotal</td>
                            <td><span id="subtotal">$4.99</span></td>
                        </tr>
                        <tr>
                            <td>Tax</td>
                            <td><span id="tax">$0.00</span><span class="pull-right" id="tax-status"><i style="color: red" class="fa fa-times fa-lg" /></span></td>
                        </tr>
                        <tr>
                            <td><strong>Total</strong></td>
                            <td><strong><span id="total">$0.00</span></strong></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    @{ await Html.RenderPartialAsync("_ValidationScriptsPartial"); }
    <script src="~/lib/jquery.payment/lib/jquery.payment.min.js"></script>
    <script src="https://js.stripe.com/v2/"></script>
    <script>
        $(document).ready(function () {
            $('footer').show();

            $(document).on("click", ".contributor-level-question", function (e, data) {
                $('#contributor-level-modal').modal('show');
            });

            $(document).on("click", ".tab-question", function (e, data) {
                $('#tab-modal').modal('show');
            });

            $(document).on("click", ".contributor-question", function (e, data) {
                $('#contributor-modal').modal('show');
            });

            $(document).on("change", ".tax-field", function (e, data) {
                $('.button-submit-wide').html('Calculate Tax');
                $('.button-submit-wide').removeClass('btn-primary').addClass('btn-default');
                clearTax();
            });

            $('#total').html('$' + (parseFloat($('#subtotal').html().substring(1)) + parseFloat($('#tax').html().substring(1))).toFixed(2));

            $('#AccountType').on("change", function () {
                if (this.value == 1) {
                    $('#account-type').html('Pro');
                }
                else {
                    $('#account-type').html('Composer');
                }
            });

            $('#Interval').on("change", function () {
                if (this.value == 0) {
                    $('#subtotal').html('$4.99');
                    $('#interval').html('Monthly');
                    $('#total').html('$' + (parseFloat($('#subtotal').html().substring(1)) + parseFloat($('#tax').html().substring(1))).toFixed(2));
                }
                else {
                    $('#subtotal').html('$49.99');
                    $('#interval').html('Yearly');
                    $('#total').html('$' + (parseFloat($('#subtotal').html().substring(1)) + parseFloat($('#tax').html().substring(1))).toFixed(2));
                }
            });

            Stripe.setPublishableKey('pk_test_mMmjGjT6aetaMgLCCu14fWGm00wC0SGVLv');

            function stripeResponseHandler(status, response) {
                var form = $('#payment-form');

                if (response.error) {
                    if (response.error) {
                        if (response.error.param) {
                            switch (response.error.param) {
                                case 'cvc':
                                    $('#cvc-error').html(response.error.message);
                                    break;
                                case 'number':
                                    $('#number-error').html(response.error.message);
                                    break;
                                case 'exp_year':
                                case 'exp_month':
                                    $('#exp-error').html(response.error.message);
                                    break;
                                case 'address_zip':
                                    $('#zip-error').html(response.error.message);
                                    break;
                            }
                        }
                        else {
                            showFailureBootbox("processing credit card payment", response.error.message);
                        }

                        enableSubmitButton();
                    }
                } else {
                    // Successful Stripe token creation
                    var token = response.id;

                    form = $('#token-form')[0];

                    // Insert the token into the form so it gets submitted to the server:
                    $('#PaymentToken').val(token);
                    $('#StripeInterval').val($('#Interval').val());
                    $('#Subtotal').val($('#subtotal').html().substring(1));
                    $('#Tax').val($('#tax').html().substring(1));
                    $('#StripeAddress').val($('#Address').val());
                    $('#StripeCity').val($('#City').val());
                    $('#StripeState').val($('#State').val());
                    $('#StripeZip').val($('#Zip').val());

                    $.ajax({
                        url: form.action,
                        type: 'POST',
                        data: new FormData(form),
                        cache: false,
                        contentType: false,
                        processData: false
                    }).then(function (response) {
                        enableSubmitButton();

                        if (response.error) {
                            if (response.param) {
                                switch (response.param) {
                                    case 'cvc':
                                        $('#cvc-error').html(response.error);
                                        break;
                                    case 'number':
                                        $('#number-error').html(response.error);
                                        break;
                                    case 'exp_year':
                                    case 'exp_month':
                                        $('#exp-error').html(response.error);
                                        break;
                                    case 'address_zip':
                                        $('#zip-error').html(response.error);
                                        break;
                                    default:
                                        showFailureBootbox("processing credit card payment", response.error);
                                        break;
                                }
                            }
                            else {
                                showFailureBootbox("processing credit card payment", response.error);
                            }
                        }
                        else {
                            $('#account-details').remove();
                            $('#table-form-container').addClass('flex-container-row')
                            $('#table-form-container').html(response);
                        }
                    }).fail(function (error) {
                        showFailureBootbox("processing credit card payment", error.error);
                    });
                }
            }

            // Check card type
            $(document).on("keyup", "#CardNumber", function () {
                validateCardNumber(this);
            });

            // Check card type
            $(document).on("paste", "#CardNumber", function () {
                var that = this;
                setTimeout(function () {
                    validateCardNumber(that);
                }, 0);
            });

            function validateCardNumber(event) {
                var $amex = $('#amex'),
                    $visa = $('#visa'),
                    $mastercard = $('#mastercard'),
                    $discover = $('#discover'),
                    $cardNumber = $(event);

                $amex.removeClass('transparent');
                $visa.removeClass('transparent');
                $mastercard.removeClass('transparent');
                $discover.removeClass('transparent');

                if ($.payment.cardType($cardNumber.val()) == 'visa') {
                    $mastercard.addClass('transparent');
                    $amex.addClass('transparent');
                    $discover.addClass('transparent');
                } else if ($.payment.cardType($cardNumber.val()) == 'amex') {
                    $mastercard.addClass('transparent');
                    $visa.addClass('transparent');
                    $discover.addClass('transparent');
                } else if ($.payment.cardType($cardNumber.val()) == 'mastercard') {
                    $amex.addClass('transparent');
                    $visa.addClass('transparent');
                    $discover.addClass('transparent');
                }
                else if ($.payment.cardType($cardNumber.val()) == 'discover') {
                    $amex.addClass('transparent');
                    $visa.addClass('transparent');
                    $mastercard.addClass('transparent');
                }
            }

            $(document).on("submit", "#payment-form", function (e, data) {
                // Show spinner on reset button
                $('.button-submit-wide').html('<div class="loader"></div>');
                $('.button-submit-wide').addClass('disabled');

                e.preventDefault();

                $('.validation-error').html('');

                // If we haven't gotten a tax rate yet, request it
                if ($('#tax-status').html().includes('fa-times')) {
                    $('#tax-status').html('<div class="loader"></div>');
                    $.ajax({
                        url: 'CalculateTaxRate?address=' + encodeURIComponent($('#Address').val()) + '&city=' + encodeURIComponent($('#City').val()) + '&state=' + encodeURIComponent($('#State').val()) + '&zip=' + encodeURIComponent($('#Zip').val()),
                        type: 'GET'
                    }).then(function (response) {                           
                        if (response.error) {
                            clearTax();
                            showFailureBootbox("calculating tax", response.error);
                            enableSubmitButton();
                        }
                        else {
                            let subtotal = $('#subtotal').html().substring(1);
                            $('#tax').html('$' + parseFloat(response.taxRate * subtotal).toFixed(2));
                            $('#total').html('$' + (parseFloat(subtotal) + parseFloat($('#tax').html().substring(1))).toFixed(2));
                            $('#tax-status').html('<i style="color: rgb(134,192,144)" class="fa fa-check fa-lg" />');
                            enableSubmitButton();
                        }
                    }).fail(function (error) {
                        clearTax();
                        showFailureBootbox("calculating tax", error.error);
                        enableSubmitButton();
                    });
                }
                else {
                    Stripe.card.createToken({
                        number: $('#CardNumber').val(),
                        cvc: $('#CVC').val(),
                        exp_month: $('#Month').val(),
                        exp_year: $('#Year').val(),
                        address_zip: $('#Zip').val()
                    }, stripeResponseHandler);
                }
            });

            function enableSubmitButton() {
                $('.button-submit-wide').removeClass('disabled');

                // If we haven't gotten a tax rate, the label should be Calculate Tax
                if ($('#tax-status').html().includes('fa-times')) {
                    $('.button-submit-wide').html('Calculate Tax');
                    $('.button-submit-wide').removeClass('btn-primary').addClass('btn-default');
                }
                else {
                    $('.button-submit-wide').html('Upgrade Account');
                    $('.button-submit-wide').removeClass('btn-default').addClass('btn-primary');
                }                    
            }

            function clearTax() {
                $('#tax').html('$0.00');
                $('#total').html('$' + (parseFloat($('#subtotal').html().substring(1)).toFixed(2)));
                $('#tax-status').html('<i style="color: red" class="fa fa-times fa-lg" />');
            }
        });
    </script>
}
